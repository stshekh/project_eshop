<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    <changeSet author="com.gmail.sshekh" id="1538416069810-1">
        <createTable tableName="t_audit">
            <column autoIncrement="true" name="ID_AUDIT" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="CREATED" type="datetime"/>
            <column name="EVENT_TYPE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-2">
        <createTable tableName="t_comment">
            <column autoIncrement="true" name="ID_COMMENT" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="CONTENT" type="TEXT"/>
            <column name="CREATED" type="datetime"/>
            <column name="USER_ID" type="BIGINT"/>
            <column name="NEWS_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-3">
        <createTable tableName="t_discount">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="EXPIRATION_DATE" type="datetime"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="DISCOUNT_RATE" type="DECIMAL(19, 2)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-4">
        <createTable tableName="t_discount_item">
            <column name="DISCOUNT_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="ITEM_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-5">
        <createTable tableName="t_item">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="PRICE" type="DECIMAL(19, 2)"/>
            <column name="UNIQUE_NUMBER" type="VARCHAR(255)"/>
            <column name="ENABLE" type="TINYINT(1)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-6">
        <createTable tableName="t_news">
            <column autoIncrement="true" name="ID_NEWS" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="CONTENT" type="TEXT"/>
            <column name="CREATION_TIME" type="datetime"/>
            <column name="TITLE" type="VARCHAR(255)"/>
            <column name="USER_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-7">
        <createTable tableName="t_order">
            <column name="ITEM_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="USER_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="CREATED" type="datetime"/>
            <column name="QUANTITY" type="BIGINT"/>
            <column name="STATUS" type="VARCHAR(40)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-8">
        <createTable tableName="t_permission">
            <column autoIncrement="true" name="ID_PERMISSION" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="PERMISSION_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-9">
        <createTable tableName="t_profile">
            <column name="ID_USER" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="ADRESS" type="VARCHAR(255)"/>
            <column name="TELEPHONE" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-10">
        <createTable tableName="t_role">
            <column autoIncrement="true" name="ID_ROLE" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="ROLE_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-11">
        <createTable tableName="t_role_permission">
            <column name="PERMISSION_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="ROLE_ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-12">
        <createTable tableName="t_user">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="EMAIL" type="VARCHAR(255)"/>
            <column name="FIRST_NAME" type="VARCHAR(255)"/>
            <column name="LAST_NAME" type="VARCHAR(255)"/>
            <column name="PASSWORD" type="VARCHAR(255)"/>
            <column name="ID_DISCOUNT" type="BIGINT"/>
            <column defaultValueNumeric="2" name="ID_ROLE" type="BIGINT"/>
            <column name="ENABLED" type="TINYINT(1)"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-13">
        <createIndex indexName="FKa0xexpnhoc27elrxufr8msciw" tableName="t_discount_item">
            <column name="ITEM_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-14">
        <createIndex indexName="FKarcirgjq1lmcoew4k7sa1l8c4" tableName="t_audit">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-15">
        <createIndex indexName="FKdkd4wtatiq4gri79mrk38jrdv" tableName="t_news">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-16">
        <createIndex indexName="FKi79r2hea32cvgl97duwexnqlj" tableName="t_user">
            <column name="ID_ROLE"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-17">
        <createIndex indexName="FKltnl4nkgy60ptf653vs9ip8kk" tableName="t_comment">
            <column name="NEWS_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-18">
        <createIndex indexName="FKn8f9see7nqn9l6r8i60fv3rg2" tableName="t_user">
            <column name="ID_DISCOUNT"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-19">
        <createIndex indexName="FKod7yvgpte1s8padon3rba7iwh" tableName="t_order">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-20">
        <createIndex indexName="FKsgbw04ptcabb8jeclm8buvb6v" tableName="t_role_permission">
            <column name="ROLE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-21">
        <createIndex indexName="FKtfdfs10jlse87pexvkwu9kkbb" tableName="t_comment">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-22">
        <addForeignKeyConstraint baseColumnNames="PERMISSION_ID" baseTableName="t_role_permission"
                                 constraintName="FK31ev2oprblmmwf6d5srontx8f" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID_PERMISSION" referencedTableName="t_permission"
                                 validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-23">
        <addForeignKeyConstraint baseColumnNames="ITEM_ID" baseTableName="t_discount_item"
                                 constraintName="FKa0xexpnhoc27elrxufr8msciw" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_item" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-24">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="t_audit"
                                 constraintName="FKarcirgjq1lmcoew4k7sa1l8c4" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_user" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-25">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="t_news"
                                 constraintName="FKdkd4wtatiq4gri79mrk38jrdv" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_user" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-26">
        <addForeignKeyConstraint baseColumnNames="ID_ROLE" baseTableName="t_user"
                                 constraintName="FKi79r2hea32cvgl97duwexnqlj" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID_ROLE" referencedTableName="t_role" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-27">
        <addForeignKeyConstraint baseColumnNames="NEWS_ID" baseTableName="t_comment"
                                 constraintName="FKltnl4nkgy60ptf653vs9ip8kk" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID_NEWS" referencedTableName="t_news" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-28">
        <addForeignKeyConstraint baseColumnNames="ID_DISCOUNT" baseTableName="t_user"
                                 constraintName="FKn8f9see7nqn9l6r8i60fv3rg2" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_discount" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-29">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="t_order"
                                 constraintName="FKod7yvgpte1s8padon3rba7iwh" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_user" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-30">
        <addForeignKeyConstraint baseColumnNames="DISCOUNT_ID" baseTableName="t_discount_item"
                                 constraintName="FKrwsfnm8si3yutdlbi8j6os6vb" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_discount" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-31">
        <addForeignKeyConstraint baseColumnNames="ROLE_ID" baseTableName="t_role_permission"
                                 constraintName="FKsgbw04ptcabb8jeclm8buvb6v" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID_ROLE" referencedTableName="t_role" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-32">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="t_comment"
                                 constraintName="FKtfdfs10jlse87pexvkwu9kkbb" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_user" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-33">
        <addForeignKeyConstraint baseColumnNames="ITEM_ID" baseTableName="t_order"
                                 constraintName="FKtgnbsa06g79bvrkp8jgh04371" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_item" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-34">
        <insert tableName="T_ROLE">
            <column name="ID_ROLE" value="1"/>
            <column name="ROLE_NAME" value="Security user"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-35">
        <insert tableName="T_ROLE">
            <column name="ID_ROLE" value="2"/>
            <column name="ROLE_NAME" value="Customer user"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-36">
        <insert tableName="T_ROLE">
            <column name="ID_ROLE" value="3"/>
            <column name="ROLE_NAME" value="Sale user"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-37">
        <insert tableName="T_ROLE">
            <column name="ID_ROLE" value="4"/>
            <column name="ROLE_NAME" value="API user"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-38">
        <insert tableName="T_PERMISSION">
            <column name="ID_PERMISSION" value="1"/>
            <column name="PERMISSION_NAME" value="VIEW_USERS"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-39">
        <insert tableName="T_PERMISSION">
            <column name="ID_PERMISSION" value="2"/>
            <column name="PERMISSION_NAME" value="VIEW_PROFILE"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-40">
        <insert tableName="T_PERMISSION">
            <column name="ID_PERMISSION" value="3"/>
            <column name="PERMISSION_NAME" value="MANAGE_ITEMS"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-41">
        <insert tableName="T_PERMISSION">
            <column name="ID_PERMISSION" value="4"/>
            <column name="PERMISSION_NAME" value="API_PERMISSIONS"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-42">
        <insert tableName="T_ROLE_PERMISSION">
            <column name="PERMISSION_ID" value="1"/>
            <column name="ROLE_ID" value="1"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-43">
        <insert tableName="T_ROLE_PERMISSION">
            <column name="PERMISSION_ID" value="2"/>
            <column name="ROLE_ID" value="2"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-44">
        <insert tableName="T_ROLE_PERMISSION">
            <column name="PERMISSION_ID" value="3"/>
            <column name="ROLE_ID" value="3"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-45">
        <insert tableName="T_ROLE_PERMISSION">
            <column name="PERMISSION_ID" value="4"/>
            <column name="ROLE_ID" value="4"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-46">
        <insert tableName="T_USER">
            <column name="ID" value="1"/>
            <column name="EMAIL" value="superadmin@facades.com"/>
            <column name="FIRST_NAME" value="Superuser"/>
            <column name="LAST_NAME" value="Superuser"/>
            <column name="PASSWORD" value="$2a$10$G3EjXdLH0j3ev/9ms.eyMe6YbGN8906bN3643nWSz.NTilEdtNMkG"/>
            <column name="ID_ROLE" value="1"/>
            <column name="ENABLED" value="1"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-47">
        <createTable tableName="t_business_card">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="TITLE" type="VARCHAR(60)"/>
            <column name="FULL_NAME" type="VARCHAR(60)"/>
            <column name="WORKING_TELEPHONE" type="VARCHAR(20)"/>
            <column name="USER_ID" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-48">
        <createIndex indexName="FKit_business_card_index" tableName="t_business_card">
            <column name="USER_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-49">
        <addForeignKeyConstraint baseColumnNames="USER_ID" baseTableName="t_business_card"
                                 constraintName="FKtfdfs10jlse87business_card_fk" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="ID" referencedTableName="t_user" validate="true"/>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-50">
        <insert tableName="T_PERMISSION">
            <column name="ID_PERMISSION" value="5"/>
            <column name="PERMISSION_NAME" value="MANAGE_BUSINESS_CARD"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-51">
        <insert tableName="T_USER">
            <column name="ID" value="2"/>
            <column name="EMAIL" value="news.editor@facades.com"/>
            <column name="FIRST_NAME" value="Moderator"/>
            <column name="LAST_NAME" value="Moderator"/>
            <column name="PASSWORD" value="$2a$10$kwBPHSafN8AAS.eyHMFZyOUSpnosaD7p/1gZ6g2d7DGUnREkFxmDy"/>
            <column name="ID_ROLE" value="3"/>
            <column name="ENABLED" value="1"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-52">
        <insert tableName="T_USER">
            <column name="ID" value="3"/>
            <column name="EMAIL" value="customer@customer.by"/>
            <column name="FIRST_NAME" value="Customer"/>
            <column name="LAST_NAME" value="Customer"/>
            <column name="PASSWORD" value="$2a$10$RDkDGx0PFG26aNGUR5mVuusDv55TWnD2N4Lt.QzzPnzRVzEjHUlQW"/>
            <column name="ID_ROLE" value="2"/>
            <column name="ENABLED" value="1"/>
        </insert>
    </changeSet>
    <changeSet author="com.gmail.sshekh" id="1538416069810-53">
        <insert tableName="T_USER">
            <column name="ID" value="4"/>
            <column name="EMAIL" value="apiuser@facades.com"/>
            <column name="FIRST_NAME" value="Api user"/>
            <column name="LAST_NAME" value="Api user"/>
            <column name="PASSWORD" value="$2a$06$BJ6wz5V/VSb9SFTEtO/ZPeAkluPpkzw.dPgOuYMPGyFRAbzvkcxpK"/>
            <column name="ID_ROLE" value="4"/>
            <column name="ENABLED" value="1"/>
        </insert>
    </changeSet>
</databaseChangeLog>
